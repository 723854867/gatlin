<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.gatlin.soa.account.mybatis.dao.AccountDao" >

	<resultMap id="accountMap" type="org.gatlin.soa.account.bean.entity.Account">
		<id property="id" column="id"/>
		<result column="owner" property="owner"/>
		<result column="type" property="type"/>
		<result column="usable" property="usable"/>
		<result column="cash" property="cash"/>
		<result column="owner_type" property="ownerType"/>
		<result column="created" property="created"/>
		<result column="updated" property="updated"/>
	</resultMap>

	<select id="getByUserIds" parameterType="java.util.Collection" resultMap="accountMap">
		SELECT * FROM account
		<where>
			TYPE = 1 AND owner_type = 1
			<if test="null != userIds and userIds.size() > 0">
				AND owner IN
				<foreach collection="userIds" item="userId" open="(" close=")" separator=",">
					#{userId}
				</foreach>
			</if>
		</where>
		order by created desc
	</select>
</mapper>